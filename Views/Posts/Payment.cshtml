@{
  var price = ViewBag.Price != null ? Convert.ToDouble(ViewBag.Price) : 0.0;
  double kdv = Convert.ToDouble(price) * 0.20;
  double saving = 478;
  double total = price + kdv - saving;
}
<section class="bg-slate-200 py-8 antialiased dark:bg-gray-900 md:py-16">
  <div class="mx-auto max-w-screen-xl px-4 2xl:px-0">
    <div class="mx-auto max-w-5xl">
      <h2 class="text-xl font-semibold text-gray-900 dark:text-white sm:text-2xl">Ödeme</h2>

      <div class="mt-6 sm:mt-8 lg:flex lg:items-start lg:gap-12">
        <form action="#"
          class="w-full rounded-lg border-2 border-gray-300  bg-slate-200 p-4 shadow-md dark:border-gray-700 dark:bg-gray-800 sm:p-6 lg:max-w-xl lg:p-8">
          <div class="mb-6 grid grid-cols-2 gap-4">
            <div class="col-span-2 sm:col-span-1">
              <label for="full_name" class="mb-2 block text-sm font-medium text-gray-900 dark:text-white"> Ad Soyad
                (kart üzerindeki isim)* </label>
              <input type="text" id="full_name"
                class="block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-primary-500 focus:ring-primary-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder:text-gray-400 dark:focus:border-primary-500 dark:focus:ring-primary-500"
                placeholder="" required />
            </div>

            <div class="col-span-2 sm:col-span-1">
              <label for="card-number-input" class="mb-2 block text-sm font-medium text-gray-900 dark:text-white">
                Kart Numarası*
              </label>
              <input type="text" id="card-number-input" inputmode="numeric" maxlength="19" pattern="\d{19}"
                class="block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 pe-10 text-sm text-gray-900 focus:border-primary-500 focus:ring-primary-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder:text-gray-400 dark:focus:border-primary-500 dark:focus:ring-primary-500"
                placeholder="xxxx-xxxx-xxxx-xxxx" required title="Kart numarası 16 haneli olmalıdır." />
            </div>


            <div>
              <label for="card-expiration-input"
                class="mb-2 block text-sm font-medium text-gray-900 dark:text-white">Son Kullanma Tarihi*</label>
              <div class="relative">
                <div class="pointer-events-none absolute inset-y-0 start-0 flex items-center ps-3.5">
                  <!-- Font Awesome Icon -->
                  <i class="fas fa-calendar-alt text-gray-500 dark:text-gray-400"></i>
                </div>
                <input id="card-expiration-input" type="text" inputmode="numeric" maxlength="5" placeholder="MM/YY"
                  pattern="(0[1-9]|1[0-2])\/\d{2}" title="Lütfen geçerli bir tarih formatı (MM/YY) girin."
                  class="block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 ps-9 text-sm text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder:text-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500"
                  required />
              </div>
            </div>

            <div>
              <label for="cvv-input"
                class="mb-2 flex items-center gap-1 text-sm font-medium text-gray-900 dark:text-white">
                CVV*
                <button data-tooltip-target="cvv-desc" data-tooltip-trigger="hover"
                  class="text-gray-400 hover:text-gray-900 dark:text-gray-500 dark:hover:text-white">
                  <!-- Font Awesome Icon -->
                  <i class="fas fa-question-circle text-gray-400 dark:text-gray-500"></i>
                </button>
                <div id="cvv-desc" role="tooltip"
                  class="tooltip invisible absolute z-10 inline-block rounded-lg bg-gray-900 px-3 py-2 text-sm font-medium text-white opacity-0 shadow-sm transition-opacity duration-300 dark:bg-gray-700">
                  The last 3 digits on the back of the card
                  <div class="tooltip-arrow" data-popper-arrow></div>
                </div>
              </label>
              <input type="text" id="cvv-input" pattern="^\d{3}$" maxlength="3" inputmode="numeric"
                oninput="this.value = this.value.replace(/\D/g, '')" aria-describedby="helper-text-explanation"
                class="block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-primary-500 focus:ring-primary-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder:text-gray-400 dark:focus:border-primary-500 dark:focus:ring-primary-500"
                placeholder="•••" required />
            </div>

          </div>

          <button type="submit"
            class="flex w-full items-center justify-center rounded-lg bg-cyan-500 px-5 py-2.5 text-sm font-medium text-white hover:bg-cyan-700 focus:outline-none focus:ring-4  focus:ring-primary-300 dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800">ÖDE</button>
          <!-- #region  -->
        </form>

        <div class="mt-6 grow sm:mt-8 lg:mt-0">
          <div class="space-y-4 rounded-lg p-6 border-2 border-gray-300  bg-slate-200 shadow-md dark:border-gray-700 dark:bg-gray-800">
            <div class="space-y-2">
              <dl class="flex items-center justify-between gap-4">
                <dt class="text-base font-normal text-gray-500 dark:text-gray-400">Senaryo Ücreti</dt>
                <dd class="text-base font-medium text-gray-900 dark:text-white">@ViewBag.Price</dd>
              </dl>

              <dl class="flex items-center justify-between gap-4">
                <dt class="text-base font-normal text-gray-500 dark:text-gray-400">KDV(%20)</dt>
                <dd class="text-base font-medium text-gray-800">@kdv</dd>
              </dl>

              <dl class="flex items-center justify-between gap-4">
                <dt class="text-base font-normal text-gray-500 dark:text-gray-400">İndirim</dt>
                <dd class="text-base font-medium text-green-500 dark:text-white">@saving</dd>
              </dl>


            </div>

            <dl class="flex items-center justify-between gap-4 border-t border-gray-200 pt-2 dark:border-gray-700">
              <dt class="text-base font-bold text-gray-900 dark:text-white">Toplam</dt>
              <dd class="text-base font-bold text-gray-900 dark:text-white">@total₺</dd>
            </dl>
          </div>

          <div class="mt-6 flex items-center justify-center gap-8">
            <img class="h-8 w-auto dark:hidden"
              src="https://flowbite.s3.amazonaws.com/blocks/e-commerce/brand-logos/paypal.svg" alt="" />
            <img class="hidden h-8 w-auto dark:flex"
              src="https://flowbite.s3.amazonaws.com/blocks/e-commerce/brand-logos/paypal-dark.svg" alt="" />
            <img class="h-8 w-auto dark:hidden"
              src="https://flowbite.s3.amazonaws.com/blocks/e-commerce/brand-logos/visa.svg" alt="" />
            <img class="hidden h-8 w-auto dark:flex"
              src="https://flowbite.s3.amazonaws.com/blocks/e-commerce/brand-logos/visa-dark.svg" alt="" />
            <img class="h-8 w-auto dark:hidden"
              src="https://flowbite.s3.amazonaws.com/blocks/e-commerce/brand-logos/mastercard.svg" alt="" />
            <img class="hidden h-8 w-auto dark:flex"
              src="https://flowbite.s3.amazonaws.com/blocks/e-commerce/brand-logos/mastercard-dark.svg" alt="" />
          </div>
        </div>
      </div>

      <p class="mt-6 text-center text-gray-500 dark:text-gray-400 sm:mt-8 lg:text-left">
        Ödeme, <a href="#" title=""
          class="font-medium text-primary-700 underline hover:no-underline dark:text-primary-500">İyizco</a> tarafından
        <a href="#" title=""
          class="font-medium text-primary-700 underline hover:no-underline dark:text-primary-500">Senarium</a>
        adına gerçekleştirilmiştir - Türkiye Cumhuriyeti.
      </p>
    </div>
  </div>
</section>
<script>
  document.getElementById('card-number-input').addEventListener('input', function (e) {
    let value = e.target.value.replace(/\D/g, ''); // Sayı olmayan karakterleri kaldır
    if (value.length > 16) value = value.slice(0, 16); // 16 haneyi aşma
    e.target.value = value.replace(/(\d{4})(?=\d)/g, '$1-'); // 4 rakamda bir tire ekle
  });

  const cardExpirationInput = document.getElementById('card-expiration-input');

  cardExpirationInput.addEventListener('input', function (e) {
    let value = e.target.value.replace(/\D/g, ''); // Sayı olmayan karakterleri kaldır
    if (value.length > 4) value = value.slice(0, 4);

    if (value.length >= 2) {
      value = value.replace(/(\d{2})(\d{0,2})/, '$1/$2'); // İlk 2 rakamdan sonra '/' ekle
    }

    e.target.value = value;
  });

</script>
